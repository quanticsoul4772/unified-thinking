# AGENTS GUIDE
- Build: `make build` (Windows target).
- Linux build: `make linux` (GOOS=linux).
- Quick run only for debugging via `go run ./cmd/server/main.go` (set `DEBUG=true` as needed).
- Full tests: `make test` or `go test ./...`.
- Single package: `go test ./internal/modes/... -v`.
- Single test example: `go test ./internal/modes -run TestLinearMode`.
- Short suite: `make test-short`; race detector: `make test-race`.
- Storage-only: `make test-storage`; benchmarks with `make benchmark`.
- Coverage: `make test-coverage`; inspect HTML output if needed.
- Lint using `golangci-lint run` (config `.golangci.yml`).
- Format with `go fmt ./...`; apply goimports for import sorting.
- Imports grouped standard/third-party/local separated by blank lines.
- Types: prefer builders in `internal/types`; avoid unnecessary exported fields.
- Naming follows Go conventions (MixedCaps types, lowerCamel funcs/vars).
- Errors: wrap via `fmt.Errorf("context: %w", err)`; never panic in packages.
- Logging: stick to `log.Println` gated by `DEBUG`; avoid fmt prints.
- Concurrency: respect existing mutex usage and return deep copies when sharing state.
- Tests: favor table-driven layouts, keep deterministic, update fixtures when schema changes.
- Cursor/Copilot rules: none (2025-11-15); Claude Desktop manages runtime, so avoid manual prod runs.
